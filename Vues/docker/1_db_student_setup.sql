CREATE DATABASE IF NOT EXISTS db_students;

USE db_students;

CREATE TABLE t_student (
    idStudent INT AUTO_INCREMENT PRIMARY KEY,
    stuName VARCHAR(50) NOT NULL,
    stuFirstName VARCHAR(50) NOT NULL,
    stuBirthDate DATE NOT NULL,
    UNIQUE(stuName, stuFirstName)
);

CREATE TABLE t_course (
    idCourse INT AUTO_INCREMENT PRIMARY KEY,
    courName VARCHAR(5) NOT NULL UNIQUE,
    courDescription VARCHAR(255)
);

CREATE TABLE t_evaluation (
    idEvaluation INT AUTO_INCREMENT PRIMARY KEY,
    idCourse INT NOT NULL,
    idStudent INT NOT NULL,
    evaGrade DECIMAL(2,1) NOT NULL,
    evaDate DATE NOT NULL,
    FOREIGN KEY (idCourse) REFERENCES t_course(idCourse),
    FOREIGN KEY (idStudent) REFERENCES t_student(idStudent),
    UNIQUE(idCourse, idStudent, evaDate)
);

CREATE TABLE t_reason (
    idReason INT AUTO_INCREMENT PRIMARY KEY,
    reaDescription VARCHAR(50) NOT NULL
);

CREATE TABLE t_absence (
    idAbsence INT AUTO_INCREMENT PRIMARY KEY,
    idStudent INT NOT NULL,
    absDate DATE NOT NULL,
    absPeriodStart INT(2) NOT NULL,
    absPeriodEnd INT(2) NOT NULL,
    idReason INT NOT NULL,
    FOREIGN KEY (idStudent) REFERENCES t_student(idStudent),
    FOREIGN KEY (idReason) REFERENCES t_reason(idReason)
);

-- Remplissage des données
INSERT INTO t_student (idStudent, stuName, stuFirstName, stuBirthDate)
VALUES
    (1, 'Dupont', 'Jean', '2004-03-15'),
    (2, 'Martin', 'Paul', '2004-05-22'),
    (3, 'Bernard', 'Lucie', '2004-07-10'),
    (4, 'Dubois', 'Marie', '2004-09-18'),
    (5, 'Lefebvre', 'Claire', '2004-11-05'),
    (6, 'Moreau', 'Julien', '2005-01-12'),
    (7, 'Girard', 'Sophie', '2005-03-20'),
    (8, 'Bonnet', 'Alex', '2005-05-28'),
    (9, 'Leroux', 'Emma', '2005-07-15'),
    (10, 'Roux', 'Thomas', '2005-09-23'),
    (11, 'Fournier', 'Léa', '2005-11-10'),
    (12, 'Marchand', 'Hugo', '2006-02-17'),
    (13, 'Meyer', 'Anna', '2006-04-25'),
    (14, 'Blanc', 'Nicolas', '2006-06-03'),
    (15, 'Lambert', 'Camille', '2006-08-11'),
    (16, 'Dufour', 'Lucas', '2006-10-19'),
    (17, 'Deschamps', 'Manon', '2006-12-06'),
    (18, 'Brun', 'Élise', '2007-01-23'),
    (19, 'Roussel', 'Mathéo', '2007-03-02'),
    (20, 'Vincent', 'Chloé', '2007-05-10'),
    (21, 'Lemoine', 'Émile', '2007-07-18'),
    (22, 'Garnier', 'Lola', '2007-09-25'),
    (23, 'Chevalier', 'Ethan', '2007-11-12'),
    (24, 'Vidal', 'Inès', '2008-02-19'),
    (25, 'Leroy', 'Arthur', '2008-04-28'),
    (26, 'Robin', 'Rose', '2008-06-06'),
    (27, 'Masson', 'Noah', '2008-08-14'),
    (28, 'Gauthier', 'Alice', '2008-10-22'),
    (29, 'Caron', 'Louis', '2008-12-09'),
    (30, 'Renaud', 'Léo', '2004-02-16'),
    (31, 'Perrin', 'Éva', '2004-04-24'),
    (32, 'Leclerc', 'Axel', '2004-06-02'),
    (33, 'Fischer', 'Elsa', '2004-08-10'),
    (34, 'Martinez', 'Théo', '2004-10-18'),
    (35, 'Schmitt', 'Zoé', '2004-12-05'),
    (36, 'Moulin', 'Maxime', '2005-02-22'),
    (37, 'Lopez', 'Léna', '2005-04-01'),
    (38, 'Fontaine', 'Liam', '2005-06-09'),
    (39, 'Gonzalez', 'Mia', '2005-08-17'),
    (40, 'Boucher', 'Eliott', '2005-10-25'),
    (41, 'Leclercq', 'Sarah', '2005-12-12'),
    (42, 'Berg', 'Jules', '2006-03-21'),
    (43, 'Dupuis', 'Lou', '2006-05-29'),
    (44, 'Guerin', 'Hugo', '2006-07-16'),
    (45, 'Dupont', 'Clara', '2006-09-24'),
    (46, 'Hubert', 'Samuel', '2006-11-11'),
    (47, 'Giraud', 'Anaïs', '2007-02-18'),
    (48, 'Huet', 'Éléonore', '2007-04-27'),
    (49, 'Barbier', 'Adam', '2007-06-05'),
    (50, 'Lefevre', 'Julia', '2007-08-13');

INSERT INTO t_reason (idReason, reaDescription)
VALUES
    (1, 'Maladie avec certificat médical'),
    (2, 'Maladie sans certificat médical'),
    (3, 'Suspension'),
    (4, 'Raison personnelle'),
    (5, 'Raison injustifiée');
    

INSERT INTO t_course (idCourse, courName, courDescription)
VALUES
    (1, 'I100', 'Distinguer, préparer et évaluer des données'),
    (2, 'I104', 'Implémenter un modèle de données'),
    (3, 'I114', 'Mettre en œuvre de codification, compression et chiffrement'),
    (4, 'I117', 'Mettre en place l''infrastructure d''une petite entreprise'),
    (5, 'I120', 'Implémenter les interfaces graphiques d’applications'),
    (6, 'I123', 'Activer les services d''un serveur'),
    (7, 'I133', 'Réaliser des applications Web en Session-Handling'),
    (8, 'I151', 'Intégrer des bases de données dans des applications Web'),
    (9, 'I153', 'Développer les modèles de données'),
    (10, 'I183', 'Implémenter la sécurité d''une APP'),
    (11, 'I226A', 'Implémenter orienté objets'),
    (12, 'I306', 'Réaliser un petit projet informatique'),
    (13, 'I326', 'Développer et implémenter orienté objets'),
    (14, 'I403', 'Implémenter de manière procédurale'),
    (15, 'I404', 'Programmer orienté objets'),
    (16, 'I431', 'Exécuter des mandats de manière autonome'),
    (17, 'I122', 'Automatiser des procédures à l’aide de scripts'),
    (18, 'I150', 'Adapter une application de commerce électronique'),
    (19, 'I152', 'Intégrer des contenus multimédias dans des appli.Web'),
    (20, 'I155', 'Développer des procédures temps réel'),
    (21, 'I214', 'Instruire les utilisateurs dans l''emploi de l''informatique'),
    (22, 'I242', 'Réaliser des applications pour microprocesseurs'),
    (23, 'I411', 'Dév/Appliquer des structures de données et algorithmes'),
    (24, 'I426', 'Développer un logiciel avec des méthodes agiles'),
    (25, 'C101', 'Réaliser et publier un site web'),
    (26, 'C105', 'Traiter une base de données avec SQL'),
    (27, 'C304', 'Installer et configurer un PC mono-poste'),
    (28, 'C305', 'Installer, configurer et administrer un OS'),
    (29, 'C302', 'Utiliser les fonctions avancées en bureautique'),
    (30, 'C318', 'Analyser et programmer orienté objet avec des composants'),
    (31, 'C335', 'Réaliser une APP pour mobile');
    
INSERT INTO t_absence (idStudent, absDate, absPeriodStart, absPeriodEnd, idReason)
VALUES
(1, '2023-09-05', 1, 1, 1),
(1, '2023-10-12', 1, 1, 2),
(1, '2023-11-20', 1, 2, 3),
(1, '2023-12-15', 1, 1, 4),
(1, '2024-01-10', 1, 1, 5),
(1, '2024-02-18', 1, 2, 1),
(1, '2024-03-25', 1, 1, 2),
(2, '2023-09-08', 1, 1, 1),
(2, '2023-10-15', 1, 1, 2),
(2, '2023-11-22', 1, 2, 3),
(2, '2023-12-18', 1, 1, 4),
(2, '2024-01-12', 1, 1, 5),
(2, '2024-02-20', 1, 2, 1),
(2, '2024-03-28', 1, 1, 2),
(3, '2023-09-10', 1, 1, 1),
(3, '2023-10-17', 1, 1, 2),
(3, '2023-11-24', 1, 2, 3),
(3, '2023-12-20', 1, 1, 4),
(3, '2024-01-15', 1, 1, 5),
(3, '2024-02-22', 1, 2, 1),
(3, '2024-03-30', 1, 1, 2),
(4, '2023-09-12', 1, 1, 1),
(4, '2023-10-19', 1, 1, 2),
(4, '2023-11-26', 1, 2, 3),
(4, '2023-12-22', 1, 1, 4),
(4, '2024-01-18', 1, 1, 5),
(4, '2024-02-24', 1, 2, 1),
(4, '2024-04-02', 1, 1, 2),
(5, '2023-09-15', 1, 1, 1),
(5, '2023-10-22', 1, 1, 2),
(5, '2023-11-29', 1, 2, 3),
(5, '2023-12-25', 1, 1, 4),
(5, '2024-01-20', 1, 1, 5),
(5, '2024-02-26', 1, 2, 1),
(5, '2024-04-04', 1, 1, 2),
(6, '2023-09-18', 1, 1, 1),
(6, '2023-10-25', 1, 1, 2),
(6, '2023-12-02', 1, 2, 3),
(6, '2023-12-28', 1, 1, 4),
(6, '2024-01-23', 1, 1, 5),
(6, '2024-03-01', 1, 2, 1),
(7, '2023-09-20', 1, 1, 1),
(7, '2023-10-27', 1, 1, 2),
(7, '2023-12-04', 1, 2, 3),
(7, '2023-12-30', 1, 1, 4),
(7, '2024-01-25', 1, 1, 5),
(7, '2024-03-03', 1, 2, 1),
(8, '2023-09-23', 1, 1, 1),
(8, '2023-10-30', 1, 1, 2),
(8, '2023-12-07', 1, 2, 3),
(8, '2024-01-02', 1, 1, 4),
(8, '2024-01-28', 1, 1, 5),
(8, '2024-03-06', 1, 2, 1),
(9, '2023-09-26', 1, 1, 1),
(9, '2023-11-02', 1, 1, 2),
(9, '2023-12-09', 1, 2, 3),
(9, '2024-01-05', 1, 1, 4),
(9, '2024-01-31', 1, 1, 5),
(9, '2024-03-09', 1, 2, 1),
(10, '2023-09-29', 1, 1, 1),
(10, '2023-11-05', 1, 1, 2),
(10, '2023-12-12', 1, 2, 3),
(10, '2024-01-08', 1, 1, 4),
(10, '2024-02-03', 1, 1, 5),
(10, '2024-03-12', 1, 2, 1),
(11, '2023-10-02', 1, 1, 1),
(11, '2023-11-08', 1, 1, 2),
(11, '2023-12-15', 1, 2, 3),
(11, '2024-01-11', 1, 1, 4),
(11, '2024-02-06', 1, 1, 5),
(11, '2024-03-15', 1, 2, 1),
(12, '2023-10-05', 1, 1, 1),
(12, '2023-11-11', 1, 1, 2),
(12, '2023-12-18', 1, 2, 3),
(12, '2024-01-14', 1, 1, 4),
(12, '2024-02-09', 1, 1, 5),
(12, '2024-03-18', 1, 2, 1);

INSERT INTO t_evaluation (idCourse, idStudent, evaGrade, evaDate)
VALUES
(1, 1, 5.2, '2023-09-20'),
(2, 1, 4.5, '2023-10-25'),
(3, 1, 5.8, '2023-11-30'),
(4, 1, 5.0, '2023-12-27'),
(5, 1, 4.3, '2024-01-22'),
(6, 1, 5.6, '2024-02-28'),
(7, 1, 4.8, '2024-03-25'),
(8, 1, 5.5, '2024-04-20'),
(1, 2, 5.0, '2023-09-22'),
(2, 2, 4.7, '2023-10-27'),
(3, 2, 5.9, '2023-12-01'),
(4, 2, 5.1, '2023-12-29'),
(5, 2, 4.4, '2024-01-24'),
(6, 2, 5.7, '2024-03-01'),
(7, 2, 4.9, '2024-03-27'),
(8, 2, 5.6, '2024-04-22'),
(1, 3, 5.1, '2023-09-24'),
(2, 3, 4.8, '2023-10-29'),
(3, 3, 6.0, '2023-12-03'),
(4, 3, 5.2, '2023-12-31'),
(5, 3, 4.5, '2024-01-26'),
(6, 3, 5.8, '2024-03-03'),
(7, 3, 5.0, '2024-03-29'),
(8, 3, 5.7, '2024-04-24'),
(1, 4, 5.2, '2023-09-26'),
(2, 4, 4.9, '2023-10-31'),
(3, 4, 6.0, '2023-12-05'),
(4, 4, 5.3, '2024-01-02'),
(5, 4, 4.6, '2024-01-28'),
(6, 4, 5.9, '2024-03-05'),
(7, 4, 5.1, '2024-03-31'),
(8, 4, 5.8, '2024-04-26'),
(1, 5, 5.3, '2023-09-28'),
(2, 5, 5.0, '2023-11-02'),
(3, 5, 5.5, '2023-12-07'),
(4, 5, 5.4, '2024-01-04'),
(5, 5, 4.7, '2024-01-30'),
(6, 5, 5.9, '2024-03-07'),
(7, 5, 5.2, '2024-04-02'),
(8, 5, 5.9, '2024-04-28'),
(1, 6, 5.4, '2023-10-01'),
(2, 6, 5.1, '2023-11-05'),
(3, 6, 5.6, '2023-12-10'),
(4, 6, 5.5, '2024-01-07'),
(5, 6, 4.8, '2024-02-03'),
(6, 6, 6.0, '2024-03-09'),
(7, 6, 5.3, '2024-04-05'),
(8, 6, 6.0, '2024-04-30'),
(1, 7, 5.5, '2023-10-03'),
(2, 7, 5.2, '2023-11-07'),
(3, 7, 5.7, '2023-12-12'),
(4, 7, 5.6, '2024-01-09'),
(5, 7, 5.0, '2024-02-06'),
(6, 7, 6.0, '2024-03-11'),
(7, 7, 5.4, '2024-04-07'),
(8, 7, 6.0, '2024-05-02'),
(1, 8, 5.6, '2023-10-05'),
(2, 8, 5.3, '2023-11-09'),
(3, 8, 5.8, '2023-12-14'),
(4, 8, 5.7, '2024-01-11'),
(5, 8, 5.1, '2024-02-08'),
(6, 8, 6.0, '2024-03-13'),
(7, 8, 5.5, '2024-04-09'),
(8, 8, 6.0, '2024-05-04'),
(1, 9, 5.7, '2023-10-07'),
(2, 9, 5.4, '2023-11-11'),
(3, 9, 5.9, '2023-12-16'),
(4, 9, 5.8, '2024-01-13'),
(5, 9, 5.2, '2024-02-10'),
(6, 9, 6.0, '2024-03-15'),
(7, 9, 5.6, '2024-04-11'),
(8, 9, 6.0, '2024-05-06'),
(1, 10, 5.8, '2023-10-09'),
(2, 10, 5.5, '2023-11-13'),
(3, 10, 6.0, '2023-12-18'),
(4, 10, 5.9, '2024-01-15'),
(5, 10, 5.3, '2024-02-12'),
(6, 10, 6.0, '2024-03-17'),
(7, 10, 5.7, '2024-04-13'),
(8, 10, 6.0, '2024-05-08'),
(1, 11, 5.9, '2023-10-11'),
(2, 11, 5.6, '2023-11-15'),
(3, 11, 6.0, '2023-12-20'),
(4, 11, 6.0, '2024-01-17'),
(5, 11, 5.4, '2024-02-14'),
(6, 11, 6.0, '2024-03-19'),
(7, 11, 5.8, '2024-04-15'),
(8, 11, 6.0, '2024-05-10'),
(1, 12, 6.0, '2023-10-13'),
(2, 12, 5.7, '2023-11-17'),
(3, 12, 6.0, '2023-12-22'),
(4, 12, 6.0, '2024-01-19'),
(5, 12, 5.5, '2024-02-16'),
(6, 12, 6.0, '2024-03-21'),
(7, 12, 5.9, '2024-04-17'),
(8, 12, 6.0, '2024-05-12'),
(1, 13, 6.0, '2023-10-15'),
(2, 13, 5.8, '2023-11-19'),
(3, 13, 6.0, '2023-12-24'),
(4, 13, 6.0, '2024-01-21'),
(5, 13, 5.6, '2024-02-18'),
(6, 13, 6.0, '2024-03-23'),
(7, 13, 6.0, '2024-04-19'),
(8, 13, 6.0, '2024-05-14'),
(1, 14, 6.0, '2023-10-17'),
(2, 14, 5.9, '2023-11-21'),
(3, 14, 6.0, '2023-12-26'),
(4, 14, 6.0, '2024-01-23'),
(5, 14, 5.7, '2024-02-20'),
(6, 14, 6.0, '2024-03-25'),
(7, 14, 6.0, '2024-04-21'),
(8, 14, 6.0, '2024-05-16'),
(1, 15, 6.0, '2023-10-19'),
(2, 15, 6.0, '2023-11-23'),
(3, 15, 6.0, '2023-12-28'),
(4, 15, 6.0, '2024-01-25'),
(5, 15, 5.8, '2024-02-22'),
(6, 15, 6.0, '2024-03-27'),
(7, 15, 6.0, '2024-04-23'),
(8, 15, 4.0, '2024-05-18'),
(1, 16, 4.2, '2023-10-21'),
(2, 16, 4.8, '2023-11-25'),
(3, 16, 2.3, '2023-12-30'),
(4, 16, 4.1, '2024-01-27'),
(5, 16, 1.9, '2024-02-24'),
(6, 16, 2.1, '2024-03-29'),
(7, 16, 2.0, '2024-04-25'),
(8, 16, 2.0, '2024-05-20'),
(1, 17, 5.0, '2023-10-23'),
(2, 17, 5.7, '2023-11-27'),
(3, 17, 4.3, '2023-12-31'),
(4, 17, 4.9, '2024-01-29'),
(5, 17, 4.4, '2024-02-26'),
(6, 17, 4.7, '2024-03-31'),
(7, 17, 3.9, '2024-04-27'),
(8, 17, 3.8, '2024-05-22'),
(1, 18, 4.1, '2023-10-25'),
(2, 18, 4.7, '2023-11-29'),
(3, 18, 4.6, '2024-01-02'),
(4, 18, 4.5, '2024-01-31'),
(5, 18, 4.9, '2024-02-28'),
(6, 18, 4.5, '2024-04-02'),
(7, 18, 4.5, '2024-04-29'),
(8, 18, 4.4, '2024-05-24'),
(1, 19, 6.0, '2023-10-27'),
(2, 19, 6.0, '2023-12-01'),
(3, 19, 6.0, '2024-01-04'),
(4, 19, 6.0, '2024-02-02'),
(5, 19, 6.0, '2024-03-01'),
(6, 19, 6.0, '2024-04-04'),
(7, 19, 6.0, '2024-05-01'),
(8, 19, 6.0, '2024-05-26');


    

